{
  "apps": {
    "pggat": {
      "stat_log_period": 60000000000,
      "servers": [
        {
          "listen": [
            {
              "address": ":5432",
              "ssl": {
                "provider": "self_signed"
              },
              "max_connections": 1000
            }
          ],
          "routes": [
            {
              "match": {
                "matcher": "user",
                "user": "*_ro"
              },
              "handle": {
                "handler": "rewrite_parameter",
                "key": "hybrid.mode",
                "value": "ro"
              }
            },
            {
              "match": {
                "matcher": "user",
                "user": "*_ro"
              },
              "handle": {
                "handler": "rewrite_user",
                "mode": "strip_suffix",
                "user": "_ro"
              }
            },
            {
              "handle": {
                "discoverer": {
                  "api_key": "some_env_var",
                  "discoverer": "digitalocean"
                },
                "handler": "discovery",
                "pool": {
                  "client_acquire_timeout": 60000000000,
                  "pool": "hybrid",
                  "server_idle_timeout": 300000000000,
                  "server_reconnect_initial_time": 5000000000,
                  "server_reconnect_max_time": 60000000000,
                  "tracked_parameters": [
                    "client_encoding",
                    "datestyle",
                    "timezone",
                    "standard_conforming_strings",
                    "application_name",
                    "intervalstyle",
                    "search_path"
                  ]
                },
                "reconcile_period": 300000000000,
                "server_max_connections": 50,
                "server_ssl": {
                  "provider": "insecure_skip_verify"
                },
                "server_ssl_mode": "prefer"
              }
            }
          ]
        }
      ]
    }
  }
}
